{"remainingRequest":"D:\\work3\\wallet-frontend\\node_modules\\babel-loader\\lib\\index.js!D:\\work3\\wallet-frontend\\node_modules\\cache-loader\\dist\\cjs.js??ref--0-0!D:\\work3\\wallet-frontend\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!D:\\work3\\wallet-frontend\\src\\pages\\Dashboard\\card.vue?vue&type=script&lang=js&","dependencies":[{"path":"D:\\work3\\wallet-frontend\\src\\pages\\Dashboard\\card.vue","mtime":1549628964626},{"path":"D:\\work3\\wallet-frontend\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"D:\\work3\\wallet-frontend\\node_modules\\babel-loader\\lib\\index.js","mtime":499162500000},{"path":"D:\\work3\\wallet-frontend\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"D:\\work3\\wallet-frontend\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":["import _defineProperty from \"D:\\\\work3\\\\wallet-frontend\\\\node_modules\\\\@babel\\\\runtime-corejs2/helpers/esm/defineProperty\";\nimport \"core-js/modules/es6.regexp.search\";\nimport \"core-js/modules/es6.array.find-index\";\nimport \"core-js/modules/es6.function.name\";\nimport \"core-js/modules/es6.array.sort\";\n\nvar _data$props$component;\n\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\nimport { Pagination } from \"@/components\";\nimport Fuse from \"fuse.js\";\nimport swal from \"sweetalert2\";\nimport axios from 'axios'; // const params = require('../_helpers/params.js');\n// const CONFIG = params.params; \n\nexport default (_data$props$component = {\n  data: function data() {\n    return {\n      cardName: [],\n      id: null,\n      showCard: false,\n      address: null,\n      name: null,\n      encryptedkey: null\n    };\n  },\n  props: {// imgLogo: {\n    //   type: String,\n    //   default: require('/public/img/logo.png')\n    //   }\n  },\n  components: {\n    Pagination: Pagination\n  },\n  created: function created() {\n    var token = window.localStorage.getItem('token');\n    var user = JSON.parse(localStorage.getItem('user'));\n    var app = this;\n    axios.get(\"http://localhost:3201/api/cardList\", {\n      headers: {\n        'x-access-token': token\n      }\n    }).then(function (response) {\n      console.log(response.data);\n      app.tableData = response.data.data;\n    }).catch(function (error) {\n      console.log(\"error\");\n    });\n  },\n  computed: {\n    /***\r\n     * Returns a page from the searched data or the whole data. Search is performed in the watch section below\r\n     */\n    queriedData: function queriedData() {\n      var result = this.tableData;\n\n      if (this.searchedData.length > 0) {\n        result = this.searchedData;\n      }\n\n      return result.slice(this.from, this.to);\n    },\n    to: function to() {\n      var highBound = this.from + this.pagination.perPage;\n\n      if (this.total < highBound) {\n        highBound = this.total;\n      }\n\n      return highBound;\n    },\n    from: function from() {\n      return this.pagination.perPage * (this.pagination.currentPage - 1);\n    },\n    total: function total() {\n      return this.searchedData.length > 0 ? this.searchedData.length : this.tableData.length;\n    }\n  }\n}, _defineProperty(_data$props$component, \"data\", function data() {\n  return {\n    currentSort: \"name\",\n    currentSortOrder: \"asc\",\n    pagination: {\n      perPage: 5,\n      currentPage: 1,\n      perPageOptions: [5, 10, 25, 50],\n      total: 0\n    },\n    //   footerTable: [\"Name\", \"Date\", \"Received\", \"Sent\", \"Actions\"],\n    searchQuery: \"\",\n    propsToSearch: [\"firstName\", \"email\"],\n    tableData: [],\n    transactName: [],\n    searchedData: [],\n    fuseSearch: null\n  };\n}), _defineProperty(_data$props$component, \"methods\", {\n  customSort: function customSort(value) {\n    var _this = this;\n\n    return value.sort(function (a, b) {\n      var sortBy = _this.currentSort;\n\n      if (_this.currentSortOrder === \"desc\") {\n        return a[sortBy].localeCompare(b[sortBy]);\n      }\n\n      return b[sortBy].localeCompare(a[sortBy]);\n    });\n  },\n  handleLike: function handleLike(item) {\n    swal({\n      title: \"You liked \".concat(item.name),\n      buttonsStyling: false,\n      type: \"success\",\n      confirmButtonClass: \"md-button md-success\"\n    });\n  },\n  handleEdit: function handleEdit(item) {\n    console.log('p', item);\n    this.encryptedkey = item.data;\n    this.address = item.address;\n\n    if (this.encryptedkey) {\n      this.showCard = true;\n      this.id = item._id;\n\n      if (item.accountType != 'Company') {\n        this.name = item.firstName + ' ' + item.lastName;\n      } else if (item.accountType == 'Company') {\n        this.name = item.companyName;\n      }\n    }\n  },\n  handleDelete: function handleDelete(item) {\n    var _this2 = this;\n\n    swal({\n      title: \"Are you sure?\",\n      text: \"You won't be able to revert this!\",\n      type: \"warning\",\n      showCancelButton: true,\n      confirmButtonClass: \"md-button md-success btn-fill\",\n      cancelButtonClass: \"md-button md-danger btn-fill\",\n      confirmButtonText: \"Yes, delete it!\",\n      buttonsStyling: false\n    }).then(function (result) {\n      if (result.value) {\n        _this2.deleteRow(item);\n\n        swal({\n          title: \"Deleted!\",\n          text: \"You deleted \".concat(item.name),\n          type: \"success\",\n          confirmButtonClass: \"md-button md-success btn-fill\",\n          buttonsStyling: false\n        });\n      }\n    });\n  },\n  deleteRow: function deleteRow(item) {\n    var indexToDelete = this.tableData.findIndex(function (tableRow) {\n      return tableRow.id === item.id;\n    });\n\n    if (indexToDelete >= 0) {\n      this.tableData.splice(indexToDelete, 1);\n    }\n  },\n  print: function print() {\n    this.$htmlToPaper('printMe');\n    var token = window.localStorage.getItem('token');\n    console.log('id', this.id);\n    var data = {};\n    data.status = 'Printed';\n    data.data = this.encryptedkey;\n    axios.post(\"http://localhost:3201/api/delivered/\" + this.id, data, {\n      headers: {\n        'x-access-token': token\n      }\n    }).then(function (response) {\n      console.log(\"Delivered\", response.data); //         this.$router.push('/card')\n      //         window.matchMedia('print').addListener(function (media) {\n      //       if(media.matches){\n      //       }\n      //       else{\n      //            window.location.reload(true);\n      //             //location.reload();\n      //       }\n      //    });\n    }).catch(function (error) {\n      console.log(\"error\", error);\n    });\n  }\n}), _defineProperty(_data$props$component, \"mounted\", function mounted() {\n  // Fuse search initialization.\n  this.fuseSearch = new Fuse(this.tableData, {\n    keys: [\"name\", \"email\"],\n    threshold: 0.3\n  });\n}), _defineProperty(_data$props$component, \"watch\", {\n  /**\r\n   * Searches through the table data by a given query.\r\n   * NOTE: If you have a lot of data, it's recommended to do the search on the Server Side and only display the results here.\r\n   * @param value of the query\r\n   */\n  searchQuery: function searchQuery(value) {\n    var result = this.tableData;\n\n    if (value !== \"\") {\n      result = this.fuseSearch.search(this.searchQuery);\n    }\n\n    this.searchedData = result;\n  }\n}), _data$props$component);",{"version":3,"sources":["card.vue"],"names":[],"mappings":"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","sourcesContent":["<template>\r\n  <div class=\"md-layout\">\r\n    <div class=\"md-layout-item\">\r\n      <md-card>\r\n        <md-card-header class=\"md-card-header-icon md-card-header-green\">\r\n          <div class=\"card-icon\">\r\n            <md-icon>assignment</md-icon>\r\n          </div>\r\n          <h4 class=\"title\">Card User Details</h4>\r\n        </md-card-header>\r\n        <md-card-content>\r\n          <md-table\r\n            :value=\"queriedData\"\r\n            :md-sort.sync=\"currentSort\"\r\n            :md-sort-order.sync=\"currentSortOrder\"\r\n            :md-sort-fn=\"customSort\"\r\n            class=\"paginated-table table-striped table-hover\"\r\n          >\r\n            <md-table-toolbar>\r\n              <md-field>\r\n                <label for=\"pages\">Per page</label>\r\n                <md-select v-model=\"pagination.perPage\" name=\"pages\">\r\n                  <md-option\r\n                    v-for=\"item in pagination.perPageOptions\"\r\n                    :key=\"item\"\r\n                    :label=\"item\"\r\n                    :value=\"item\"\r\n                  >\r\n                    {{ item }}\r\n                  </md-option>\r\n                </md-select>\r\n              </md-field>\r\n\r\n              <md-field>\r\n                <md-input\r\n                  type=\"search\"\r\n                  class=\"mb-3\"\r\n                  clearable\r\n                  style=\"width: 200px\"\r\n                  placeholder=\"Search records\"\r\n                  v-model=\"searchQuery\"\r\n                >\r\n                </md-input>\r\n              </md-field>\r\n            </md-table-toolbar>\r\n\r\n            <md-table-row slot=\"md-table-row\" slot-scope=\"{ item }\">\r\n              <md-table-cell md-label=\"First Name\" md-sort-by=\"firstName\">\r\n                {{ item.user.firstName }}{{ item.user.lastName }}\r\n              </md-table-cell>\r\n              <md-table-cell md-label=\"Email\" md-sort-by=\"email\">{{\r\n                item.user.email\r\n              }}</md-table-cell>\r\n              <md-table-cell md-label=\"Card Number\">{{ item.cardNumber }}</md-table-cell>\r\n              <md-table-cell md-label=\"Print Status\">{{ item.status }}</md-table-cell>\r\n              <md-table-cell md-label=\"Actions\">\r\n                <md-button\r\n                  class=\"md-just-icon md-info md-simple\"\r\n                  @click.native=\"handleLike(item)\"\r\n                >\r\n                  <md-icon>favorite</md-icon>\r\n                </md-button>\r\n                <md-button\r\n                  class=\"md-just-icon md-warning md-simple\"\r\n                  @click.native=\"handleEdit(item)\"\r\n                >\r\n                  <md-icon>dvr</md-icon>\r\n                </md-button>\r\n                <md-button\r\n                  class=\"md-just-icon md-danger md-simple\"\r\n                  @click.native=\"handleDelete(item)\"\r\n                >\r\n                  <md-icon>close</md-icon>\r\n                </md-button>\r\n              </md-table-cell>\r\n            </md-table-row>\r\n          </md-table>\r\n\r\n\r\n          <md-dialog :md-active.sync=\"showCard\" class=\"cardToken\" >\r\n                    <div id=\"printMe\">\r\n                      <div class=\"logo-img\">\r\n                        <img :src=\"imgLogo\" alt=\"\">\r\n                      </div>\r\n                <!-- <div class=\"cardholder\">Name : {{name}}</div> -->\r\n                      <div class= \"cashBox\">\r\n                        <div class=\"cardAddress\">\r\n                          <p class= \"cardValue\">{{address}}</p>\r\n                        </div>\r\n                        <div class=\"qrcode\">\r\n                          <qrcode :value=\"encryptedkey\" :options=\"{ size: 200 }\" tag=\"img\"></qrcode>\r\n                        </div><br>\r\n                      </div>\r\n                    </div>   \r\n                    <div class=\"md-layout-item md-size-100 text-right\">\r\n                      <md-button @click=\"print\" >Print </md-button>\r\n                    </div>             \r\n                  </md-dialog> \r\n          <!-- <div class=\"footer-table md-table\">\r\n            <table>\r\n              <tfoot>\r\n                <tr>\r\n                  <th\r\n                    v-for=\"item in footerTable\"\r\n                    :key=\"item.name\"\r\n                    class=\"md-table-head\"\r\n                  >\r\n                    <div class=\"md-table-head-container md-ripple md-disabled\">\r\n                      <div class=\"md-table-head-label\">\r\n                        {{ item }}\r\n                      </div>\r\n                    </div>\r\n                  </th>\r\n                </tr>\r\n              </tfoot>\r\n            </table>\r\n          </div> -->\r\n\r\n          \r\n        </md-card-content>\r\n        <md-card-actions md-alignment=\"space-between\">\r\n          <div class=\"\">\r\n            <p class=\"card-category\">\r\n              Showing {{ from + 1 }} to {{ to }} of {{ total }} entries\r\n            </p>\r\n          </div>\r\n          <pagination\r\n            class=\"pagination-no-border pagination-success\"\r\n            v-model=\"pagination.currentPage\"\r\n            :per-page=\"pagination.perPage\"\r\n            :total=\"total\"\r\n          >\r\n          </pagination>\r\n        </md-card-actions>\r\n      </md-card>\r\n    </div>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport { Pagination } from \"@/components\";\r\nimport Fuse from \"fuse.js\";\r\nimport swal from \"sweetalert2\";\r\nimport axios from 'axios';\r\n// const params = require('../_helpers/params.js');\r\n// const CONFIG = params.params; \r\n\r\nexport default {\r\ndata() {\r\n        return {\r\n            \r\n            cardName:[],\r\n            id: null,\r\n            showCard: false,\r\n            address: null,\r\n            name: null,\r\n            encryptedkey: null,\r\n            \r\n             }\r\n        }, \r\n props: {\r\n          // imgLogo: {\r\n          //   type: String,\r\n          //   default: require('/public/img/logo.png')\r\n          //   }\r\n      },\r\n        \r\n\r\n  components: {\r\n    Pagination\r\n  },\r\n  created () {\r\n            const token = window.localStorage.getItem('token');        \r\n            let user = JSON.parse(localStorage.getItem('user'));\r\n            var app=this;\r\n                axios.get(\"http://localhost:3201/api/cardList\",{headers:{'x-access-token': token}})\r\n                    .then((response) => {\r\n                console.log(response.data)             \r\n                app.tableData = response.data.data;               \r\n            })\r\n            .catch((error) => {\r\n                console.log(\"error\");\r\n            });\r\n       },\r\n\r\n  computed: {\r\n    /***\r\n     * Returns a page from the searched data or the whole data. Search is performed in the watch section below\r\n     */\r\n    queriedData() {\r\n      let result = this.tableData;\r\n      if (this.searchedData.length > 0) {\r\n        result = this.searchedData;\r\n      }\r\n      return result.slice(this.from, this.to);\r\n    },\r\n    to() {\r\n      let highBound = this.from + this.pagination.perPage;\r\n      if (this.total < highBound) {\r\n        highBound = this.total;\r\n      }\r\n      return highBound;\r\n    },\r\n    from() {\r\n      return this.pagination.perPage * (this.pagination.currentPage - 1);\r\n    },\r\n    total() {\r\n      return this.searchedData.length > 0\r\n        ? this.searchedData.length\r\n        : this.tableData.length;\r\n    }\r\n  },\r\n  data() {\r\n    return {\r\n      currentSort: \"name\",\r\n      currentSortOrder: \"asc\",\r\n      pagination: {\r\n        perPage: 5,\r\n        currentPage: 1,\r\n        perPageOptions: [5, 10, 25, 50],\r\n        total: 0\r\n      },\r\n    //   footerTable: [\"Name\", \"Date\", \"Received\", \"Sent\", \"Actions\"],\r\n      searchQuery: \"\",\r\n      propsToSearch: [\"firstName\", \"email\"],\r\n      tableData: [],\r\n       transactName:[],\r\n      searchedData: [],\r\n      fuseSearch: null\r\n    };\r\n  },\r\n  methods: {\r\n    customSort(value) {\r\n      return value.sort((a, b) => {\r\n        const sortBy = this.currentSort;\r\n        if (this.currentSortOrder === \"desc\") {\r\n          return a[sortBy].localeCompare(b[sortBy]);\r\n        }\r\n        return b[sortBy].localeCompare(a[sortBy]);\r\n      });\r\n    },\r\n    handleLike(item) {\r\n      swal({\r\n        title: `You liked ${item.name}`,\r\n        buttonsStyling: false,\r\n        type: \"success\",\r\n        confirmButtonClass: \"md-button md-success\"\r\n      });\r\n    },\r\n      handleEdit(item) {\r\n      console.log('p',item)\r\n            this.encryptedkey = item.data\r\n             this.address = item.address \r\n            if(this.encryptedkey) {\r\n                 this.showCard = true\r\n                 this.id = item._id\r\n                if(item.accountType != 'Company') {\r\n                    this.name = item.firstName + ' ' + item.lastName\r\n                }\r\n                else if(item.accountType == 'Company') {\r\n                    this.name = item.companyName\r\n                }\r\n            }\r\n    },\r\n    handleDelete(item) {\r\n      swal({\r\n        title: \"Are you sure?\",\r\n        text: `You won't be able to revert this!`,\r\n        type: \"warning\",\r\n        showCancelButton: true,\r\n        confirmButtonClass: \"md-button md-success btn-fill\",\r\n        cancelButtonClass: \"md-button md-danger btn-fill\",\r\n        confirmButtonText: \"Yes, delete it!\",\r\n        buttonsStyling: false\r\n      }).then(result => {\r\n        if (result.value) {\r\n          this.deleteRow(item);\r\n          swal({\r\n            title: \"Deleted!\",\r\n            text: `You deleted ${item.name}`,\r\n            type: \"success\",\r\n            confirmButtonClass: \"md-button md-success btn-fill\",\r\n            buttonsStyling: false\r\n          });\r\n        }\r\n      });\r\n    },\r\n    deleteRow(item) {\r\n      let indexToDelete = this.tableData.findIndex(\r\n        tableRow => tableRow.id === item.id\r\n      );\r\n      if (indexToDelete >= 0) {\r\n        this.tableData.splice(indexToDelete, 1);\r\n      }\r\n    },\r\n\r\n\r\n\r\n    print() {\r\n            this.$htmlToPaper('printMe');\r\n            const token = window.localStorage.getItem('token')\r\n            console.log('id',this.id)\r\n            let data = {} \r\n            data.status = 'Printed'\r\n            data.data = this.encryptedkey\r\n            axios.post(\"http://localhost:3201/api/delivered/\"+this.id,data,{headers:{'x-access-token': token}})          \r\n            .then((response) => {\r\n            console.log(\"Delivered\",response.data)\r\n//         this.$router.push('/card')\r\n\r\n//         window.matchMedia('print').addListener(function (media) {\r\n\r\n//       if(media.matches){\r\n\r\n//       }\r\n//       else{\r\n//            window.location.reload(true);\r\n//             //location.reload();\r\n//       }\r\n//    });\r\n\r\n    })\r\n    .catch((error) => {\r\n      console.log(\"error\",error);\r\n    });\r\n        }\r\n  },\r\n  mounted() {\r\n    // Fuse search initialization.\r\n    this.fuseSearch = new Fuse(this.tableData, {\r\n      keys: [\"name\", \"email\"],\r\n      threshold: 0.3\r\n    });\r\n  },\r\n  watch: {\r\n    /**\r\n     * Searches through the table data by a given query.\r\n     * NOTE: If you have a lot of data, it's recommended to do the search on the Server Side and only display the results here.\r\n     * @param value of the query\r\n     */\r\n    searchQuery(value) {\r\n      let result = this.tableData;\r\n      if (value !== \"\") {\r\n        result = this.fuseSearch.search(this.searchQuery);\r\n      }\r\n      this.searchedData = result;\r\n    }\r\n  }\r\n};\r\n</script>\r\n\r\n<style lang=\"css\" scoped>\r\n.md-card .md-card-actions{\r\n  border: 0;\r\n  margin-left: 20px;\r\n  margin-right: 20px;\r\n}\r\n\r\n\r\n  .cardAddress {\r\n    position: relative;\r\n    top: 228px;\r\n    width: 77% !important;\r\n    margin-left: auto;\r\n    margin-right: auto;\r\n  }\r\n\r\n  .qrcode {\r\n    position: relative;\r\n    bottom: 42px;\r\n}\r\n\r\n  .cardValue {\r\n    word-wrap: break-word !important;\r\n  }\r\n  .cashBox {\r\n    position: relative;\r\n    /* border: double; */\r\n    height: 82% !important;\r\n    margin-left: auto;\r\n    margin-right: auto;\r\n    width: 71%;\r\n  }\r\n  .logo-img {\r\n    width: 90px;\r\n    margin-left: auto;\r\n    margin-right: auto;\r\n}\r\n  .cardholder {\r\n      text-align: center;\r\n  }\r\n</style>\r\n"],"sourceRoot":"src/pages/Dashboard"}]}