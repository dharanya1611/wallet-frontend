{"remainingRequest":"d:\\work2\\vue-material-dashboard\\node_modules\\babel-loader\\lib\\index.js!d:\\work2\\vue-material-dashboard\\node_modules\\eslint-loader\\index.js??ref--13-0!d:\\work2\\vue-material-dashboard\\src\\_helpers\\routers.js","dependencies":[{"path":"d:\\work2\\vue-material-dashboard\\src\\_helpers\\routers.js","mtime":1549446442852},{"path":"d:\\work2\\vue-material-dashboard\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"d:\\work2\\vue-material-dashboard\\node_modules\\babel-loader\\lib\\index.js","mtime":499162500000},{"path":"d:\\work2\\vue-material-dashboard\\node_modules\\eslint-loader\\index.js","mtime":499162500000}],"contextDependencies":[],"result":["import \"core-js/modules/es7.array.includes\";\nimport Vue from \"vue\";\nimport Router from \"vue-router\";\nimport routes from \"../routes/routes\";\nVue.use(Router);\nexport var router = new Router({\n  mode: \"history\",\n  routes: routes\n});\nrouter.beforeEach(function (to, from, next) {\n  var publicPages = [\"/login\", \"/register\"];\n  var authRequired = !publicPages.includes(to.path);\n  var loggedIn = JSON.parse(localStorage.getItem('user'));\n\n  if (authRequired && !loggedIn) {\n    return next('login');\n  }\n\n  if (!authRequired && loggedIn) {\n    return next('dashboard');\n  }\n\n  if (to.meta.canseesponser) {\n    if (loggedIn.accountType.toLowerCase() === 'Sponser'.toLowerCase()) {\n      return next();\n    } else {\n      return next('dashboard');\n    }\n  }\n\n  if (to.meta.canseecampaigner) {\n    if (loggedIn.accountType.toLowerCase() === 'campaigner'.toLowerCase()) {\n      return next();\n    } else {\n      return next('dashboard');\n    }\n  }\n\n  next();\n});",{"version":3,"sources":["d:\\work2\\vue-material-dashboard\\src\\_helpers\\routers.js"],"names":["Vue","Router","routes","use","router","mode","beforeEach","to","from","next","publicPages","authRequired","includes","path","loggedIn","JSON","parse","localStorage","getItem","meta","canseesponser","accountType","toLowerCase","canseecampaigner"],"mappings":";AAAA,OAAOA,GAAP,MAAgB,KAAhB;AACA,OAAOC,MAAP,MAAmB,YAAnB;AACA,OAAOC,MAAP,MAAmB,kBAAnB;AAEAF,GAAG,CAACG,GAAJ,CAAQF,MAAR;AAEA,OAAO,IAAMG,MAAM,GAAG,IAAIH,MAAJ,CAAW;AAC/BI,EAAAA,IAAI,EAAE,SADyB;AAE/BH,EAAAA,MAAM,EAAEA;AAFuB,CAAX,CAAf;AAKPE,MAAM,CAACE,UAAP,CAAkB,UAACC,EAAD,EAAKC,IAAL,EAAWC,IAAX,EAAoB;AACpC,MAAMC,WAAW,GAAG,CAAC,QAAD,EAAW,WAAX,CAApB;AACE,MAAMC,YAAY,GAAG,CAACD,WAAW,CAACE,QAAZ,CAAqBL,EAAE,CAACM,IAAxB,CAAtB;AACA,MAAMC,QAAQ,GAAGC,IAAI,CAACC,KAAL,CAAWC,YAAY,CAACC,OAAb,CAAqB,MAArB,CAAX,CAAjB;;AAEA,MAAGP,YAAY,IAAI,CAACG,QAApB,EAA8B;AAC1B,WAAOL,IAAI,CAAC,OAAD,CAAX;AACH;;AAED,MAAG,CAACE,YAAD,IAAiBG,QAApB,EAA8B;AAC1B,WAAOL,IAAI,CAAC,WAAD,CAAX;AACH;;AAED,MAAGF,EAAE,CAACY,IAAH,CAAQC,aAAX,EAA0B;AACtB,QAAGN,QAAQ,CAACO,WAAT,CAAqBC,WAArB,OAAuC,UAAUA,WAAV,EAA1C,EAAmE;AAC/D,aAAOb,IAAI,EAAX;AACH,KAFD,MAEM;AACF,aAAOA,IAAI,CAAC,WAAD,CAAX;AACH;AACJ;;AAED,MAAGF,EAAE,CAACY,IAAH,CAAQI,gBAAX,EAA6B;AACzB,QAAGT,QAAQ,CAACO,WAAT,CAAqBC,WAArB,OAAuC,aAAaA,WAAb,EAA1C,EAAsE;AAClE,aAAOb,IAAI,EAAX;AACH,KAFD,MAEM;AACF,aAAOA,IAAI,CAAC,WAAD,CAAX;AACH;AACJ;;AAEDA,EAAAA,IAAI;AAEP,CA/BD","sourcesContent":["import Vue from \"vue\";\r\nimport Router from \"vue-router\";\r\nimport routes from \"../routes/routes\";\r\n\r\nVue.use(Router);\r\n\r\nexport const router = new Router({\r\n  mode: \"history\",\r\n  routes: routes\r\n})\r\n\r\nrouter.beforeEach((to, from, next) => {\r\n  const publicPages = [\"/login\", \"/register\"];\r\n    const authRequired = !publicPages.includes(to.path);\r\n    const loggedIn = JSON.parse(localStorage.getItem('user'));\r\n\r\n    if(authRequired && !loggedIn) {\r\n        return next('login')\r\n    }\r\n\r\n    if(!authRequired && loggedIn) {\r\n        return next('dashboard')\r\n    }\r\n\r\n    if(to.meta.canseesponser) {\r\n        if(loggedIn.accountType.toLowerCase() === 'Sponser'.toLowerCase()) {\r\n            return next()\r\n        }else {\r\n            return next('dashboard')\r\n        }\r\n    }\r\n\r\n    if(to.meta.canseecampaigner) {\r\n        if(loggedIn.accountType.toLowerCase() === 'campaigner'.toLowerCase()) {\r\n            return next()\r\n        }else {\r\n            return next('dashboard')\r\n        }\r\n    }\r\n\r\n    next()\r\n\r\n})"]}]}